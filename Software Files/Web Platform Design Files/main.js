console.log('main script');
console.log(
				sessionStorage.getItem("username"),
            	sessionStorage.getItem("password"),  
            	sessionStorage.getItem("role")
        	);

async function postData(url, data) {
  // Default options are marked with *
  const response = await fetch(url, {
	method: 'POST', // *GET, POST, PUT, DELETE, etc.
	mode: 'cors', // no-cors, *cors, same-origin
	cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
	headers: {
	  'Content-Type': 'application/json'
	},
	body: JSON.stringify(data) // body data type must match "Content-Type" header
  });
  return response.json(); // parses JSON response into native JavaScript objects
}


var url = 'https://us-south.functions.cloud.ibm.com/api/v1/web/ORG_NCSU_CF_dev/ConnectedFarms/get-cognos-session-with-authenticationV2';
var payload = {
    "body": {
        "username": sessionStorage.getItem("username"),
		"password": sessionStorage.getItem("password"),
		"role": sessionStorage.getItem("role")
    }
}

console.log('submitting');

postData(url, payload)
	.then((data) => {
		console.log(data); // JSON data parsed by `response.json()` call
	    const sessionCode = data['sessionCode'];
	    const success = data['success'];
	    const message = data['message'];
	    console.log(sessionCode);
		if(success){
	    	console.log("success",data);
    		var spec = null;
    		if (sessionStorage.getItem("role") === "farmer"){
    			spec = 	{"name":"New dashboard","layout":{"id":"page0","items":[{"id":"model0000017087ae6de8_00000000","items":[{"id":"model000001708c178e0a_00000003","style":{"left":"219.5px","top":"38.5px","height":"97px","width":"78px"},"type":"widget"},{"id":"model0000017087c672bb_00000006","from":"model0000017087af6151_00000000","style":{"left":"46px","top":"96px","height":"503px","width":"392px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672b4_00000000","from":"model0000017087aa34e1_00000000","style":{"width":"168px","height":"50px","top":"62px","left":"478px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672b8_00000002","from":"model0000017087b0fa89_00000003","style":{"left":"683px","top":"125px","height":"72px","width":"91px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672b8_00000003","from":"model0000017087b1b317_00000000","style":{"width":"200px","height":"50px","left":"478px","top":"147px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672b8_00000006","from":"model0000017087b2dd2c_00000003","style":{"left":"683px","top":"215px","height":"86px","width":"87px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672b8_00000007","from":"model0000017087b335fa_00000000","style":{"width":"153px","height":"50px","left":"483px","top":"240px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672b8_00000008","from":"model0000017087b46333_00000000","style":{"width":"292px","height":"25px","top":"112px","left":"478px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672b9_00000000","from":"model0000017087b4e83d_00000000","style":{"width":"292px","height":"25px","top":"203px","left":"478px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672b9_00000003","from":"model0000017087aa1a88_00000003","style":{"left":"683px","top":"37px","height":"75px","width":"91px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672ba_00000000","from":"model0000017087b6ebc2_00000000","style":{"width":"292px","height":"120px","top":"254px","left":"478px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672ba_00000001","from":"model0000017087b91b62_00000000","style":{"width":"168px","height":"50px","top":"349px","left":"478px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672ba_00000002","from":"model0000017087b97171_00000000","style":{"width":"294px","height":"25px","top":"412px","left":"478px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672ba_00000005","from":"model0000017087c06e6e_00000002","style":{"left":"687px","top":"327px","height":"74px","width":"87px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672ba_00000008","from":"model0000017087c29d0c_00000003","style":{"left":"678px","top":"437px","height":"75px","width":"131px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672ba_00000009","from":"model0000017087c31aa0_00000000","style":{"width":"164px","height":"50px","left":"478px","top":"462px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672ba_0000000a","from":"model0000017087c3da03_00000000","style":{"width":"296px","height":"25px","top":"512px","left":"478px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672bb_00000002","from":"model0000017087c42b03_00000003","style":{"left":"687px","top":"537px","height":"78px","width":"102px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672bb_00000003","from":"model0000017087c4a86c_00000000","style":{"width":"119px","height":"50px","left":"483px","top":"550px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c866f7_00000000","style":{"height":"302px","width":"267px","top":"62px","left":"823px"},"type":"widget"},{"id":"model0000017087d5b506_00000000","style":{"width":"134px","height":"50px","top":"62px","left":"46px"},"type":"widget"}],"type":"absolute","title":{"translationTable":{"Default":"Plots"}},"templateName":"NoTemplate"},{"id":"model0000017087c96a2c_00000000","items":[{"id":"model0000017087c9c59a_00000000","style":{"left":"12px","top":"14px","height":"417px","width":"560px"},"type":"widget"},{"id":"model0000017087d4c4e4_00000000","style":{"left":"573px","top":"12px","height":"420px","width":"500px"},"type":"widget"}],"type":"absolute","title":{"translationTable":{"Default":"Graphs"}},"templateName":"NoTemplate"},{"id":"model0000017087ae7430_00000000","items":[{"id":"model000001708c1a3915_00000000","style":{"left":"582px","top":"15px","height":"420px","width":"500px"},"type":"widget"},{"id":"model000001708c1caf0b_00000000","style":{"left":"45px","top":"59px","height":"376px","width":"485px"},"type":"widget"}],"type":"absolute","title":{"translationTable":{"Default":"Historical Data"}},"templateName":"NoTemplate"}],"style":{"height":"100%"},"type":"tab"},"theme":"defaultTheme","version":1009,"eventGroups":[{"id":"model0000017087ae6de8_00000000:1","widgetIds":["model0000017087c672b8_00000006","model0000017087c672bb_00000006","model0000017087c672b8_00000002","model0000017087c672ba_00000005","model0000017087c672b9_00000003","model0000017087c672ba_00000008","model0000017087c672bb_00000002","model000001708c178e0a_00000003"]},{"id":"model0000017087c96a2c_00000000:1","widgetIds":["model0000017087c9c59a_00000000","model0000017087d4c4e4_00000000"]},{"id":"model0000017087ae7430_00000000:1","widgetIds":["model000001708c1a3915_00000000","model000001708c1caf0b_00000000"]}],"properties":{"defaultLocale":"Default"},"pageContext":[{"origin":"filter","table":"","alias":"0","sourceId":"model0000017087812c37_00000002","conditions":[{"from":["2020-02-26"],"to":["2020-02-27"],"attributeUniqueNames":["CAMERA.DATE_1"]}],"scope":"page1","hierarchyNames":["Date"],"hierarchyUniqueNames":["CAMERA.DATE_1"],"isNamedSet":false},{"origin":"filter","table":"","alias":"0","sourceId":"model0000017087812c37_00000002","scope":"page1","hierarchyNames":["Time"],"hierarchyUniqueNames":["CAMERA.TIME_1"],"exclude":false,"isNamedSet":false,"tupleSet":"{\"CAMERA.TIME_1->[11:56:20]\":{\"u\":\"CAMERA.TIME_1->[11:56:20]\",\"d\":\"11:56:20\"}}"},{"origin":"filter","table":"","alias":"0","sourceId":"model0000017087812c37_00000002","scope":"page1","hierarchyNames":["Device Id"],"hierarchyUniqueNames":["CAMERA.DEVICE_ID"],"exclude":false,"isNamedSet":false,"tupleSet":"{\"CAMERA.DEVICE_ID->[0009]\":{\"u\":\"CAMERA.DEVICE_ID->[0009]\",\"d\":\"0009\"}}"},{"origin":"filter","table":"","alias":"0","sourceId":"model0000017087812c37_00000002","scope":"model0000017087ae6de8_00000000","hierarchyNames":["Device Id"],"hierarchyUniqueNames":["CAMERA.DEVICE_ID"],"exclude":false,"isNamedSet":false,"tupleSet":"{\"CAMERA.DEVICE_ID->[0009]\":{\"u\":\"CAMERA.DEVICE_ID->[0009]\",\"d\":\"0009\"}}"},{"origin":"filter","table":"","alias":"0","sourceId":"model0000017087812c37_00000002","conditions":[{"from":["2020-02-26"],"to":["2020-02-27"],"attributeUniqueNames":["CAMERA.DATE_1"]}],"scope":"model0000017087ae6de8_00000000","hierarchyNames":["Date"],"hierarchyUniqueNames":["CAMERA.DATE_1"],"isNamedSet":false},{"origin":"filter","table":"","alias":"0","sourceId":"model0000017087812c37_00000002","scope":"model0000017087ae6de8_00000000","hierarchyNames":["Time"],"hierarchyUniqueNames":["CAMERA.TIME_1"],"exclude":false,"isNamedSet":false,"tupleSet":"{\"CAMERA.TIME_1->[13:54:28]\":{\"u\":\"CAMERA.TIME_1->[13:54:28]\",\"d\":\"13:54:28\"}}"},{"origin":"filter","table":"","alias":"0","sourceId":"model0000017087812c37_00000002","conditions":{},"scope":"model0000017087c96a2c_00000000","hierarchyNames":["Date"],"hierarchyUniqueNames":["CAMERA.DATE_1"],"isNamedSet":false},{"origin":"filter","table":"","alias":"0","sourceId":"model0000017087812c37_00000002","scope":"model0000017087c96a2c_00000000","hierarchyNames":["Device Id"],"hierarchyUniqueNames":["CAMERA.DEVICE_ID"],"isNamedSet":false},{"origin":"filter","table":"","alias":"0","sourceId":"model0000017087812c37_00000002","conditions":{},"scope":"model0000017087ae7430_00000000","hierarchyNames":["Date"],"hierarchyUniqueNames":["CAMERA.DATE_1"],"isNamedSet":false}],"dataSources":{"version":"1.0","sources":[{"id":"model0000017087812c37_00000002","assetId":"assetId0000017087812c37_00000000","clientId":"myUniqueId7890","module":{"xsd":"https://ibm.com/daas/module/1.0/module.xsd","source":{"id":"connectedfarmsDB2","jdbc":{"jdbcUrl":"jdbc:db2://dashdb-txnha-flex-yp-dal09-21.services.dal.bluemix.net:50000/BLUDB","driverClassName":"com.ibm.db2.jcc.DB2Driver","connectionProperties":"OPTIONAL=TRUE;LOGINTIMEOUT=0"},"user":"bluadmin","password":"YzY2ZDkyNDRjODQ3"},"table":{"name":"CAMERA","description":"description of the table for visual hints ","column":[{"name":"DEVICE_ID","description":"String","datatype":"NVARCHAR(60)","nullable":false,"label":"Device Id","usage":"identifier","regularAggregate":"countDistinct"},{"name":"DEVICE_STATUS","description":"String","datatype":"NVARCHAR(60)","nullable":false,"label":"Device Status","usage":"attribute","regularAggregate":"countDistinct"},{"name":"WATER_STRESS_LEVEL","description":"String","datatype":"BIGINT","nullable":false,"label":"Water Stress Level","usage":"attribute","regularAggregate":"total"},{"name":"CANOPY_TEMPERATURE","description":"String","datatype":"DOUBLE","nullable":false,"label":"Canopy Temperature","usage":"attribute","regularAggregate":"total"},{"name":"AIR_TEMPERATURE","description":"String","datatype":"DOUBLE","nullable":false,"label":"Air Temperature","usage":"attribute","regularAggregate":"total"},{"name":"WITTYPI_TEMPERATURE","description":"String","datatype":"DOUBLE","nullable":false,"label":"Witty Pi Temperature","usage":"attribute","regularAggregate":"total"},{"name":"CPU_TEMPERATURE","description":"String","datatype":"DOUBLE","nullable":false,"label":"CPU Temperature","usage":"attribute","regularAggregate":"total"},{"name":"LUXOMETER","description":"String","datatype":"DOUBLE","nullable":false,"label":"Luxometer","usage":"attribute","regularAggregate":"total"},{"name":"DATE_AND_TIME","description":"String","datatype":"String","nullable":false,"label":"Timestamp","usage":"attribute","regularAggregate":"total"},{"name":"LATITUDE","description":"String","datatype":"DOUBLE","nullable":false,"label":"Latitude","usage":"attribute","regularAggregate":"total"},{"name":"LONGITUDE","description":"String","datatype":"DOUBLE","nullable":false,"label":"Longitude","usage":"attribute","regularAggregate":"total"},{"name":"DATE_1","description":"String","datatype":"DATE","nullable":false,"label":"Date","usage":"attribute","regularAggregate":"total"},{"name":"TIME_1","description":"String","datatype":"NVARCHAR(60)","nullable":false,"label":"Time","usage":"attribute","regularAggregate":"count"}]},"label":"Module Name","identifier":"moduleId"},"name":"Connected Farms DB2","shaping":{"shapingId":"shaping000001719d66f18f_00000000","embeddedModuleUpToDate":false,"moserJSON":{"version":"5.0.1","container":"C","useSpec":[{"identifier":"ES","type":"url","storeID":"baseModule","imports":"*"}],"expressionLocale":"en-us","querySubject":[{"ref":["ES.CAMERA"],"instanceType":"reference","item":[{"queryItem":{"regularAggregate":"count","identifier":"WATER_STRESS_LEVEL","property":[{"name":"propertySetByUser_regularAggregate","value":"true"}]}}],"identifier":"CAMERA"}],"calculation":[{"expression":"CAMERA.WATER_STRESS_LEVEL + 0","usage":"fact","format":"","datatype":"DECIMAL(20,0)","nullable":true,"regularAggregate":"calculated","datatypeCategory":"number","highlevelDatatype":"decimal","facetDefinition":{"enabled":"automatic"},"identifier":"Water_Stress_Level_0","label":"Water Stress Level + 0","property":[{"name":"ui_expr","value":"{\"func\":\"simpleCalculation\",\"version\":\"5.0.1\",\"inputtedName\":\"\",\"operation\":\"+\",\"swap\":false,\"elementOperands\":[\"CAMERA.WATER_STRESS_LEVEL\",\"\"],\"numberOperands\":[\"\",\"0\"]}"}],"propertyOverride":["NEW"]},{"expression":"CAMERA.WATER_STRESS_LEVEL + 0","usage":"fact","format":"","datatype":"DECIMAL(20,0)","nullable":true,"regularAggregate":"calculated","datatypeCategory":"number","highlevelDatatype":"decimal","facetDefinition":{"enabled":"automatic"},"identifier":"Water_Stress_Level_0_1","label":"Water Stress Level","property":[{"name":"ui_expr","value":"{\"func\":\"customCalculation\",\"version\":\"5.0.1\"}"}],"propertyOverride":["NEW"]},{"expression":"CAMERA.CANOPY_TEMPERATURE + 0","usage":"fact","format":"","datatype":"DOUBLE","nullable":true,"regularAggregate":"calculated","datatypeCategory":"number","highlevelDatatype":"decimal","facetDefinition":{"enabled":"automatic"},"identifier":"Canopy_Temperature","label":"Canopy Temperature","property":[{"name":"ui_expr","value":"{\"func\":\"simpleCalculation\",\"version\":\"5.0.1\",\"inputtedName\":\"Canopy Temperature\",\"operation\":\"+\",\"swap\":false,\"elementOperands\":[\"CAMERA.CANOPY_TEMPERATURE\",\"\"],\"numberOperands\":[\"\",\"0\"]}"}],"propertyOverride":["NEW"]},{"expression":"CAMERA.CANOPY_TEMPERATURE + 0","usage":"fact","format":"","datatype":"DOUBLE","nullable":true,"regularAggregate":"calculated","datatypeCategory":"number","highlevelDatatype":"decimal","facetDefinition":{"enabled":"automatic"},"identifier":"Canopy_Temperature_1","label":"Canopy Temperature","property":[{"name":"ui_expr","value":"{\"func\":\"simpleCalculation\",\"version\":\"5.0.1\",\"inputtedName\":\"Canopy Temperature\",\"operation\":\"+\",\"swap\":false,\"elementOperands\":[\"CAMERA.CANOPY_TEMPERATURE\",\"\"],\"numberOperands\":[\"\",\"0\"]}"}],"propertyOverride":["NEW"]},{"expression":"CAMERA.CANOPY_TEMPERATURE + 0","usage":"fact","format":"","datatype":"DOUBLE","nullable":true,"regularAggregate":"calculated","datatypeCategory":"number","highlevelDatatype":"decimal","facetDefinition":{"enabled":"automatic"},"identifier":"Canopy_Temperature_2","label":"Canopy Temperature","property":[{"name":"ui_expr","value":"{\"func\":\"simpleCalculation\",\"version\":\"5.0.1\",\"inputtedName\":\"Canopy Temperature\",\"operation\":\"+\",\"swap\":false,\"elementOperands\":[\"CAMERA.CANOPY_TEMPERATURE\",\"\"],\"numberOperands\":[\"\",\"0\"]}"}],"propertyOverride":["NEW"]},{"expression":"CAMERA.AIR_TEMPERATURE + 0","usage":"fact","format":"","datatype":"DOUBLE","nullable":true,"regularAggregate":"calculated","datatypeCategory":"number","highlevelDatatype":"decimal","facetDefinition":{"enabled":"automatic"},"identifier":"Air_Temperature_0","label":"Air Temperature","property":[{"name":"ui_expr","value":"{\"func\":\"simpleCalculation\",\"version\":\"5.0.1\",\"inputtedName\":\"Air Temperature\",\"operation\":\"+\",\"swap\":false,\"elementOperands\":[\"CAMERA.AIR_TEMPERATURE\",\"\"],\"numberOperands\":[\"\",\"0\"]}"}],"propertyOverride":["NEW"]}],"metadataTreeView":[{"folderItem":[{"ref":"Water_Stress_Level_0"},{"ref":"Water_Stress_Level_0_1"},{"ref":"Canopy_Temperature"},{"ref":"Canopy_Temperature_1"},{"ref":"Canopy_Temperature_2"},{"ref":"Air_Temperature_0"}]}],"dataRetrievalMode":"liveConnection","identifier":"newModel","label":"newModel"}}}]},"drillThrough":[],"widgets":{"model0000017087c672b4_00000000":{"id":"model0000017087c672b4_00000000","type":"text","content":{"translationTable":{"Default":"<div class=\"staticContent textFillNoScroll\" dir=\"auto\"><div class=\"summernote\" style=\"display: none;\"></div><div class=\"note-editor\"><div class=\"note-dropzone\">  <div class=\"note-dropzone-message\"></div></div><div class=\"note-editing-area\"><div class=\"note-handle\"><div class=\"note-control-selection\"><div class=\"note-control-selection-bg\"></div><div class=\"note-control-holder note-control-nw\"></div><div class=\"note-control-holder note-control-ne\"></div><div class=\"note-control-holder note-control-sw\"></div><div class=\"note-control-sizing note-control-se\"></div><div class=\"note-control-selection-info\"></div></div></div><div class=\"note-editable\" contenteditable=\"false\"><p class=\"responsiveColor responsiveFontSize responsiveFontFamily\" style=\"font-size: 17px;\">Water Stress Level:</p></div></div></div></div>"}},"isResponsive":true,"visTypeLocked":true,"name":""},"model0000017087c672b8_00000002":{"id":"model0000017087c672b8_00000002","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model0000017087b0fa89_00000000","itemId":"CAMERA.CANOPY_TEMPERATURE","itemLabel":"Canopy Temperature"}],"id":"model0000017087b0fa89_00000001"}]},"slotmapping":{"slots":[{"name":"level1","dataItems":["model0000017087b0fa89_00000000"],"caption":"Level one","id":"level1","layerId":"data"}]},"type":"live","name":{"translationTable":{}},"visId":"list"},"model0000017087c672b8_00000003":{"id":"model0000017087c672b8_00000003","type":"text","content":{"translationTable":{"Default":"<div class=\"staticContent textFillNoScroll\" dir=\"auto\"><div class=\"summernote\" style=\"display: none;\"></div><div class=\"note-editor\"><div class=\"note-dropzone\">  <div class=\"note-dropzone-message\"></div></div><div class=\"note-editing-area\"><div class=\"note-handle\"><div class=\"note-control-selection\"><div class=\"note-control-selection-bg\"></div><div class=\"note-control-holder note-control-nw\"></div><div class=\"note-control-holder note-control-ne\"></div><div class=\"note-control-holder note-control-sw\"></div><div class=\"note-control-sizing note-control-se\"></div><div class=\"note-control-selection-info\"></div></div></div><div class=\"note-editable\" contenteditable=\"false\"><p class=\"responsiveColor responsiveFontSize responsiveFontFamily\" style=\"font-size: 18px;\"><span>Canopy Temperature:</span></p></div></div></div></div>"}},"isResponsive":true,"visTypeLocked":true,"name":""},"model0000017087c672b8_00000006":{"id":"model0000017087c672b8_00000006","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model0000017087b2dd2c_00000000","itemId":"CAMERA.AIR_TEMPERATURE","itemLabel":"Air Temperature"}],"id":"model0000017087b2dd2c_00000001"}]},"slotmapping":{"slots":[{"name":"level1","dataItems":["model0000017087b2dd2c_00000000"],"caption":"Level one","id":"level1","layerId":"data"}]},"type":"live","name":{"translationTable":{}},"visId":"list"},"model0000017087c672b8_00000007":{"id":"model0000017087c672b8_00000007","type":"text","content":{"translationTable":{"Default":"<div class=\"staticContent textFillNoScroll\" dir=\"auto\"><div class=\"summernote\" style=\"display: none;\"></div><div class=\"note-editor\"><div class=\"note-dropzone\">  <div class=\"note-dropzone-message\"></div></div><div class=\"note-editing-area\"><div class=\"note-handle\"><div class=\"note-control-selection\"><div class=\"note-control-selection-bg\"></div><div class=\"note-control-holder note-control-nw\"></div><div class=\"note-control-holder note-control-ne\"></div><div class=\"note-control-holder note-control-sw\"></div><div class=\"note-control-sizing note-control-se\"></div><div class=\"note-control-selection-info\"></div></div></div><div class=\"note-editable\" contenteditable=\"false\"><p class=\"responsiveColor responsiveFontSize responsiveFontFamily\" style=\"font-size: 18px;\"><span>Air Temperature:</span></p></div></div></div></div>"}},"isResponsive":true,"visTypeLocked":true,"name":""},"model0000017087c672b8_00000008":{"id":"model0000017087c672b8_00000008","type":"shape","name":"Line","content":"<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\"  class=\"staticContent\" height=\"100%\" width=\"100%\" preserveAspectRatio=\"none\"  viewBox=\"0 0 100 100\"><g xmlns=\"http://www.w3.org/2000/svg\" vector-effect=\"non-scaling-stroke\"><path stroke=\"currentColor\" stroke-width=\"3\" vector-effect=\"non-scaling-stroke\" d=\"M0 50L100 50\"/><path style=\"fill:none!important;stroke:none!important;pointer-events:all!important\" vector-effect=\"non-scaling-stroke\" d=\"M0 30H100V70H0z\"/></g></svg>","borderColor":"color8","fillColor":"transparent","visTypeLocked":true},"model0000017087c672b9_00000000":{"id":"model0000017087c672b9_00000000","type":"shape","name":"Line","content":"<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\"  class=\"staticContent\" height=\"100%\" width=\"100%\" preserveAspectRatio=\"none\"  viewBox=\"0 0 100 100\"><g xmlns=\"http://www.w3.org/2000/svg\" vector-effect=\"non-scaling-stroke\"><path stroke=\"currentColor\" stroke-width=\"3\" vector-effect=\"non-scaling-stroke\" d=\"M0 50L100 50\"/><path style=\"fill:none!important;stroke:none!important;pointer-events:all!important\" vector-effect=\"non-scaling-stroke\" d=\"M0 30H100V70H0z\"/></g></svg>","borderColor":"color8","fillColor":"transparent","visTypeLocked":true},"model0000017087c672b9_00000003":{"id":"model0000017087c672b9_00000003","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model0000017087aa1a88_00000000","itemId":"CAMERA.WATER_STRESS_LEVEL","itemLabel":"Water Stress Level"}],"id":"model0000017087aa1a88_00000001"}]},"slotmapping":{"slots":[{"name":"level1","dataItems":["model0000017087aa1a88_00000000"],"caption":"Level one","id":"level1","layerId":"data"}]},"type":"live","name":{"translationTable":{}},"visId":"list"},"model0000017087c672ba_00000000":{"id":"model0000017087c672ba_00000000","type":"shape","name":"Line","content":"<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\"  class=\"staticContent\" height=\"100%\" width=\"100%\" preserveAspectRatio=\"none\"  viewBox=\"0 0 100 100\"><g xmlns=\"http://www.w3.org/2000/svg\" vector-effect=\"non-scaling-stroke\"><path stroke=\"currentColor\" stroke-width=\"3\" vector-effect=\"non-scaling-stroke\" d=\"M0 50L100 50\"/><path style=\"fill:none!important;stroke:none!important;pointer-events:all!important\" vector-effect=\"non-scaling-stroke\" d=\"M0 30H100V70H0z\"/></g></svg>","borderColor":"color8","fillColor":"transparent","visTypeLocked":true},"model0000017087c672ba_00000001":{"id":"model0000017087c672ba_00000001","type":"text","content":{"translationTable":{"Default":"<div class=\"staticContent textFillNoScroll\" dir=\"auto\"><div class=\"summernote\" style=\"display: none;\"></div><div class=\"note-editor\"><div class=\"note-dropzone\">  <div class=\"note-dropzone-message\"></div></div><div class=\"note-editing-area\"><div class=\"note-handle\"><div class=\"note-control-selection\"><div class=\"note-control-selection-bg\"></div><div class=\"note-control-holder note-control-nw\"></div><div class=\"note-control-holder note-control-ne\"></div><div class=\"note-control-holder note-control-sw\"></div><div class=\"note-control-sizing note-control-se\"></div><div class=\"note-control-selection-info\"></div></div></div><div class=\"note-editable\" contenteditable=\"false\"><p class=\"responsiveColor responsiveFontSize responsiveFontFamily\" style=\"font-size: 16px;\"><span>WittyPi Temperature:</span></p></div></div></div></div>"}},"isResponsive":true,"visTypeLocked":true,"name":""},"model0000017087c672ba_00000002":{"id":"model0000017087c672ba_00000002","type":"shape","name":"Line","content":"<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\"  class=\"staticContent\" height=\"100%\" width=\"100%\" preserveAspectRatio=\"none\"  viewBox=\"0 0 100 100\"><g xmlns=\"http://www.w3.org/2000/svg\" vector-effect=\"non-scaling-stroke\"><path stroke=\"currentColor\" stroke-width=\"3\" vector-effect=\"non-scaling-stroke\" d=\"M0 50L100 50\"/><path style=\"fill:none!important;stroke:none!important;pointer-events:all!important\" vector-effect=\"non-scaling-stroke\" d=\"M0 30H100V70H0z\"/></g></svg>","borderColor":"color8","fillColor":"transparent","visTypeLocked":true},"model0000017087c672ba_00000005":{"id":"model0000017087c672ba_00000005","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model0000017087c06e6d_00000000","itemId":"CAMERA.WITTYPI_TEMPERATURE","itemLabel":"Witty Pi Temperature"}],"id":"model0000017087c06e6e_00000000"}]},"slotmapping":{"slots":[{"name":"level1","dataItems":["model0000017087c06e6d_00000000"],"caption":"Level one","id":"level1","layerId":"data"}]},"type":"live","name":{"translationTable":{}},"visId":"list"},"model0000017087c672ba_00000008":{"id":"model0000017087c672ba_00000008","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model0000017087c29d0c_00000000","itemId":"CAMERA.CPU_TEMPERATURE","itemLabel":"CPU Temperature"}],"id":"model0000017087c29d0c_00000001"}]},"slotmapping":{"slots":[{"name":"level1","dataItems":["model0000017087c29d0c_00000000"],"caption":"Level one","id":"level1","layerId":"data"}]},"type":"live","name":{"translationTable":{}},"visId":"list"},"model0000017087c672ba_00000009":{"id":"model0000017087c672ba_00000009","type":"text","content":{"translationTable":{"Default":"<div class=\"staticContent textFillNoScroll\" dir=\"auto\"><div class=\"summernote\" style=\"display: none;\"></div><div class=\"note-editor\"><div class=\"note-dropzone\">  <div class=\"note-dropzone-message\"></div></div><div class=\"note-editing-area\"><div class=\"note-handle\"><div class=\"note-control-selection\"><div class=\"note-control-selection-bg\"></div><div class=\"note-control-holder note-control-nw\"></div><div class=\"note-control-holder note-control-ne\"></div><div class=\"note-control-holder note-control-sw\"></div><div class=\"note-control-sizing note-control-se\"></div><div class=\"note-control-selection-info\"></div></div></div><div class=\"note-editable\" contenteditable=\"false\"><p class=\"responsiveColor responsiveFontSize responsiveFontFamily\" style=\"font-size: 17px;\"><span>CPU Temperature:</span></p></div></div></div></div>"}},"isResponsive":true,"visTypeLocked":true,"name":""},"model0000017087c672ba_0000000a":{"id":"model0000017087c672ba_0000000a","type":"shape","name":"Line","content":"<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\"  class=\"staticContent\" height=\"100%\" width=\"100%\" preserveAspectRatio=\"none\"  viewBox=\"0 0 100 100\"><g xmlns=\"http://www.w3.org/2000/svg\" vector-effect=\"non-scaling-stroke\"><path stroke=\"currentColor\" stroke-width=\"3\" vector-effect=\"non-scaling-stroke\" d=\"M0 50L100 50\"/><path style=\"fill:none!important;stroke:none!important;pointer-events:all!important\" vector-effect=\"non-scaling-stroke\" d=\"M0 30H100V70H0z\"/></g></svg>","borderColor":"color8","fillColor":"transparent","visTypeLocked":true},"model0000017087c672bb_00000002":{"id":"model0000017087c672bb_00000002","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model0000017087c42b03_00000000","itemId":"CAMERA.LUXOMETER","itemLabel":"Luxometer"}],"id":"model0000017087c42b03_00000001"}]},"slotmapping":{"slots":[{"name":"level1","dataItems":["model0000017087c42b03_00000000"],"caption":"Level one","id":"level1","layerId":"data"}]},"type":"live","name":{"translationTable":{}},"visId":"list"},"model0000017087c672bb_00000003":{"id":"model0000017087c672bb_00000003","type":"text","content":{"translationTable":{"Default":"<div class=\"staticContent textFillNoScroll\" dir=\"auto\"><div class=\"summernote\" style=\"display: none;\"></div><div class=\"note-editor\"><div class=\"note-dropzone\">  <div class=\"note-dropzone-message\"></div></div><div class=\"note-editing-area\"><div class=\"note-handle\"><div class=\"note-control-selection\"><div class=\"note-control-selection-bg\"></div><div class=\"note-control-holder note-control-nw\"></div><div class=\"note-control-holder note-control-ne\"></div><div class=\"note-control-holder note-control-sw\"></div><div class=\"note-control-sizing note-control-se\"></div><div class=\"note-control-selection-info\"></div></div></div><div class=\"note-editable\" contenteditable=\"false\"><p class=\"responsiveColor responsiveFontSize responsiveFontFamily\" style=\"font-size: 19px;\"><span>Luxometer:</span></p></div></div></div></div>"}},"isResponsive":true,"visTypeLocked":true,"name":""},"model0000017087c672bb_00000006":{"id":"model0000017087c672bb_00000006","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model0000017087af75c8_00000001","itemId":"CAMERA.LATITUDE","itemLabel":"Latitude"},{"id":"model0000017087af7b4b_00000001","itemId":"CAMERA.LONGITUDE","itemLabel":"Longitude"}],"id":"model0000017087af75c8_00000000"}]},"visTypeLocked":true,"slotmapping":{"slots":[{"name":"latlongLocations.latitude","dataItems":["model0000017087af75c8_00000001"],"caption":"Latitude","id":"latlongLocations.latitude","layerId":"data.latlong"},{"name":"latlongLocations.longitude","dataItems":["model0000017087af7b4b_00000001"],"caption":"Longitude","id":"latlongLocations.longitude","layerId":"data.latlong"}],"layers":[{"type":"data.latlong","id":"data.latlong","dataViewId":"model0000017087af75c8_00000000"}]},"type":"live","visId":"com.ibm.vis.rave2bundletiledmap","name":{"translationTable":{}}},"model0000017087c866f7_00000000":{"id":"model0000017087c866f7_00000000","properties":{"itemName":"Device Id","itemId":"CAMERA.DEVICE_ID","dataType":"string","usage":"attribute","isHierarchy":false,"sourceId":"model0000017087812c37_00000002","scope":"model0000017087ae6de8_00000000"},"type":"filter","name":""},"model0000017087c9c59a_00000000":{"id":"model0000017087c9c59a_00000000","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model0000017087c9db88_00000000","itemId":"CAMERA.TIME_1","itemLabel":"Time"},{"id":"model0000017087cd33a0_00000004","itemId":"Water_Stress_Level_0_1","itemLabel":"Water Stress Level + 0","aggregate":"avg","format":{"id":"none","localizedString":"Auto"}}],"id":"model0000017087c9db87_00000000"},{"modelRef":"model0000017087c9db87_00000000","dataItems":[],"id":"model0000017087cd39c9_00000002"}]},"visTypeLocked":true,"slotmapping":{"slots":[{"name":"categories","dataItems":["model0000017087c9db88_00000000"],"dataItemSettings":[],"caption":"x-axis","id":"categories","layerId":"data"},{"name":"values","dataItems":["model0000017087cd33a0_00000004"],"caption":"y-axis","id":"values","layerId":"data"}]},"type":"live","visId":"com.ibm.vis.rave2line","name":{"translationTable":{}},"localFilters":[]},"model0000017087d4c4e4_00000000":{"id":"model0000017087d4c4e4_00000000","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model0000017087d4d79f_00000000","itemId":"CAMERA.TIME_1","itemLabel":"Time"},{"id":"model000001719d66f855_00000000","itemId":"Air_Temperature_0","itemLabel":"Air Temperature","aggregate":"avg"}],"id":"model0000017087d4d79e_00000000"}]},"visTypeLocked":true,"slotmapping":{"slots":[{"name":"categories","dataItems":["model0000017087d4d79f_00000000"],"dataItemSettings":[],"caption":"x-axis","id":"categories","layerId":"data"},{"name":"values","dataItems":["model000001719d66f855_00000000"],"caption":"y-axis","id":"values"}]},"type":"live","visId":"com.ibm.vis.rave2line","name":{"translationTable":{}},"localFilters":[]},"model0000017087d5b506_00000000":{"id":"model0000017087d5b506_00000000","type":"text","content":{"translationTable":{"Default":"<div class=\"staticContent textFillNoScroll\" dir=\"auto\"><div class=\"summernote\" style=\"display: none;\"></div><div class=\"note-editor\"><div class=\"note-dropzone\">  <div class=\"note-dropzone-message\"></div></div><div class=\"note-editing-area\"><div class=\"note-handle\"><div class=\"note-control-selection\"><div class=\"note-control-selection-bg\"></div><div class=\"note-control-holder note-control-nw\"></div><div class=\"note-control-holder note-control-ne\"></div><div class=\"note-control-holder note-control-sw\"></div><div class=\"note-control-sizing note-control-se\"></div><div class=\"note-control-selection-info\"></div></div></div><div class=\"note-editable\" contenteditable=\"false\"><p class=\"responsiveColor responsiveFontSize responsiveFontFamily\" style=\"font-size: 23px;\"><span>Device Status:</span></p></div></div></div></div>"}},"isResponsive":true,"visTypeLocked":true,"name":""},"model000001708c178e0a_00000003":{"id":"model000001708c178e0a_00000003","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model000001708c178e0a_00000000","itemId":"CAMERA.DEVICE_STATUS","itemLabel":"Device Status"}],"id":"model000001708c178e0a_00000001"}]},"slotmapping":{"slots":[{"name":"level1","dataItems":["model000001708c178e0a_00000000"],"caption":"Level one","id":"level1","layerId":"data"}]},"type":"live","name":{"translationTable":{}},"visId":"list"},"model000001708c1a3915_00000000":{"id":"model000001708c1a3915_00000000","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model000001708c1b852b_00000000","itemId":"CAMERA.DATE_1","itemLabel":"Date"},{"id":"model000001719d639a63_00000001","itemId":"Canopy_Temperature_2","itemLabel":"Canopy Temperature","aggregate":"max"}],"id":"model000001708c1a5f06_00000000"}]},"visTypeLocked":true,"slotmapping":{"slots":[{"name":"categories","dataItems":["model000001708c1b852b_00000000"],"dataItemSettings":[],"caption":"x-axis","id":"categories","layerId":"data"},{"name":"values","dataItems":["model000001719d639a63_00000001"],"caption":"y-axis","id":"values"}]},"type":"live","visId":"com.ibm.vis.rave2line","name":{"translationTable":{}},"localFilters":[]},"model000001708c1caf0b_00000000":{"id":"model000001708c1caf0b_00000000","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model000001708c1cbbab_00000001","itemId":"Water_Stress_Level_0_1","itemLabel":"Water Stress Level","aggregate":"avg"},{"id":"model000001708c1ccab5_00000001","itemId":"CAMERA.DATE_1","itemLabel":"Date"}],"id":"model000001708c1cbbab_00000000"}]},"visTypeLocked":true,"slotmapping":{"slots":[{"name":"values","dataItems":["model000001708c1cbbab_00000001"],"caption":"y-axis","id":"values"},{"name":"categories","dataItems":["model000001708c1ccab5_00000001"],"dataItemSettings":[],"caption":"x-axis","id":"categories"}]},"type":"live","visId":"com.ibm.vis.rave2line","name":{"translationTable":{}},"localFilters":[]}}};
			}else{
    			spec =  {"name":"New dashboard","layout":{"id":"page0","items":[{"id":"model0000017087ae6de8_00000000","items":[{"id":"model000001708c178e0a_00000003","style":{"left":"219.5px","top":"38.5px","height":"97px","width":"78px"},"type":"widget"},{"id":"model0000017087c672bb_00000006","from":"model0000017087af6151_00000000","style":{"left":"46px","top":"96px","height":"503px","width":"392px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672b4_00000000","from":"model0000017087aa34e1_00000000","style":{"width":"168px","height":"50px","top":"62px","left":"478px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672b8_00000002","from":"model0000017087b0fa89_00000003","style":{"left":"683px","top":"125px","height":"72px","width":"91px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672b8_00000003","from":"model0000017087b1b317_00000000","style":{"width":"200px","height":"50px","left":"478px","top":"147px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672b8_00000006","from":"model0000017087b2dd2c_00000003","style":{"left":"683px","top":"215px","height":"86px","width":"87px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672b8_00000007","from":"model0000017087b335fa_00000000","style":{"width":"153px","height":"50px","left":"483px","top":"240px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672b8_00000008","from":"model0000017087b46333_00000000","style":{"width":"292px","height":"25px","top":"112px","left":"478px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672b9_00000000","from":"model0000017087b4e83d_00000000","style":{"width":"292px","height":"25px","top":"203px","left":"478px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672b9_00000003","from":"model0000017087aa1a88_00000003","style":{"left":"683px","top":"37px","height":"75px","width":"91px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672ba_00000000","from":"model0000017087b6ebc2_00000000","style":{"width":"292px","height":"120px","top":"254px","left":"478px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672ba_00000001","from":"model0000017087b91b62_00000000","style":{"width":"168px","height":"50px","top":"349px","left":"478px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672ba_00000002","from":"model0000017087b97171_00000000","style":{"width":"294px","height":"25px","top":"412px","left":"478px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672ba_00000005","from":"model0000017087c06e6e_00000002","style":{"left":"687px","top":"327px","height":"74px","width":"87px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672ba_00000008","from":"model0000017087c29d0c_00000003","style":{"left":"678px","top":"437px","height":"75px","width":"131px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672ba_00000009","from":"model0000017087c31aa0_00000000","style":{"width":"164px","height":"50px","left":"478px","top":"462px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672ba_0000000a","from":"model0000017087c3da03_00000000","style":{"width":"296px","height":"25px","top":"512px","left":"478px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672bb_00000002","from":"model0000017087c42b03_00000003","style":{"left":"687px","top":"537px","height":"78px","width":"102px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c672bb_00000003","from":"model0000017087c4a86c_00000000","style":{"width":"119px","height":"50px","left":"483px","top":"550px","transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"},"type":"widget","relatedLayouts":""},{"id":"model0000017087c866f7_00000000","style":{"height":"302px","width":"267px","top":"62px","left":"823px"},"type":"widget"},{"id":"model0000017087d5b506_00000000","style":{"width":"134px","height":"50px","top":"62px","left":"46px"},"type":"widget"}],"type":"absolute","title":{"translationTable":{"Default":"Plots"}},"templateName":"NoTemplate"},{"id":"model0000017087c96a2c_00000000","items":[{"id":"model0000017087c9c59a_00000000","style":{"left":"12px","top":"14px","height":"417px","width":"560px"},"type":"widget"},{"id":"model0000017087d4c4e4_00000000","style":{"left":"573px","top":"12px","height":"420px","width":"500px"},"type":"widget"},{"id":"model000001719d6d24c2_00000000","style":{"left":"42px","top":"429.5px","height":"420px","width":"500px"},"type":"widget"},{"id":"model000001719d6e7fe5_00000000","style":{"left":"573px","top":"432px","height":"420px","width":"500px"},"type":"widget"},{"id":"model000001719d6f6047_00000000","style":{"left":"72px","top":"834px","height":"420px","width":"500px"},"type":"widget"}],"type":"absolute","title":{"translationTable":{"Default":"Graphs"}},"templateName":"NoTemplate"},{"id":"model0000017087ae7430_00000000","items":[{"id":"model000001708c1a3915_00000000","style":{"left":"582px","top":"15px","height":"420px","width":"500px"},"type":"widget"},{"id":"model000001708c1caf0b_00000000","style":{"left":"45px","top":"59px","height":"376px","width":"485px"},"type":"widget"},{"id":"model000001719d7046d7_00000000","style":{"left":"45px","top":"435px","height":"420px","width":"500px"},"type":"widget"},{"id":"model000001719d719e72_00000000","style":{"left":"582px","top":"450px","height":"420px","width":"500px"},"type":"widget"}],"type":"absolute","title":{"translationTable":{"Default":"Historical Data"}},"templateName":"NoTemplate"}],"style":{"height":"100%"},"type":"tab"},"theme":"defaultTheme","version":1009,"eventGroups":[{"id":"model0000017087ae6de8_00000000:1","widgetIds":["model0000017087c672b8_00000006","model0000017087c672bb_00000006","model0000017087c672b8_00000002","model0000017087c672ba_00000005","model0000017087c672b9_00000003","model0000017087c672ba_00000008","model0000017087c672bb_00000002","model000001708c178e0a_00000003"]},{"id":"model0000017087c96a2c_00000000:1","widgetIds":["model0000017087c9c59a_00000000","model0000017087d4c4e4_00000000","model000001719d6d24c2_00000000","model000001719d6e7fe5_00000000","model000001719d6f6047_00000000"]},{"id":"model0000017087ae7430_00000000:1","widgetIds":["model000001708c1a3915_00000000","model000001708c1caf0b_00000000","model000001719d7046d7_00000000","model000001719d719e72_00000000"]}],"properties":{"defaultLocale":"Default"},"pageContext":[{"origin":"filter","table":"","alias":"0","sourceId":"model0000017087812c37_00000002","conditions":[{"from":["2020-02-26"],"to":["2020-02-27"],"attributeUniqueNames":["CAMERA.DATE_1"]}],"scope":"page1","hierarchyNames":["Date"],"hierarchyUniqueNames":["CAMERA.DATE_1"],"isNamedSet":false},{"origin":"filter","table":"","alias":"0","sourceId":"model0000017087812c37_00000002","scope":"page1","hierarchyNames":["Time"],"hierarchyUniqueNames":["CAMERA.TIME_1"],"exclude":false,"isNamedSet":false,"tupleSet":"{\"CAMERA.TIME_1->[11:56:20]\":{\"u\":\"CAMERA.TIME_1->[11:56:20]\",\"d\":\"11:56:20\"}}"},{"origin":"filter","table":"","alias":"0","sourceId":"model0000017087812c37_00000002","scope":"page1","hierarchyNames":["Device Id"],"hierarchyUniqueNames":["CAMERA.DEVICE_ID"],"exclude":false,"isNamedSet":false,"tupleSet":"{\"CAMERA.DEVICE_ID->[0009]\":{\"u\":\"CAMERA.DEVICE_ID->[0009]\",\"d\":\"0009\"}}"},{"origin":"filter","table":"","alias":"0","sourceId":"model0000017087812c37_00000002","scope":"model0000017087ae6de8_00000000","hierarchyNames":["Device Id"],"hierarchyUniqueNames":["CAMERA.DEVICE_ID"],"exclude":false,"isNamedSet":false,"tupleSet":"{\"CAMERA.DEVICE_ID->[0009]\":{\"u\":\"CAMERA.DEVICE_ID->[0009]\",\"d\":\"0009\"}}"},{"origin":"filter","table":"","alias":"0","sourceId":"model0000017087812c37_00000002","conditions":[{"from":["2020-02-26"],"to":["2020-02-27"],"attributeUniqueNames":["CAMERA.DATE_1"]}],"scope":"model0000017087ae6de8_00000000","hierarchyNames":["Date"],"hierarchyUniqueNames":["CAMERA.DATE_1"],"isNamedSet":false},{"origin":"filter","table":"","alias":"0","sourceId":"model0000017087812c37_00000002","scope":"model0000017087ae6de8_00000000","hierarchyNames":["Time"],"hierarchyUniqueNames":["CAMERA.TIME_1"],"exclude":false,"isNamedSet":false,"tupleSet":"{\"CAMERA.TIME_1->[13:54:28]\":{\"u\":\"CAMERA.TIME_1->[13:54:28]\",\"d\":\"13:54:28\"}}"},{"origin":"filter","table":"","alias":"0","sourceId":"model0000017087812c37_00000002","conditions":{},"scope":"model0000017087c96a2c_00000000","hierarchyNames":["Date"],"hierarchyUniqueNames":["CAMERA.DATE_1"],"isNamedSet":false},{"origin":"filter","table":"","alias":"0","sourceId":"model0000017087812c37_00000002","scope":"model0000017087c96a2c_00000000","hierarchyNames":["Device Id"],"hierarchyUniqueNames":["CAMERA.DEVICE_ID"],"isNamedSet":false},{"origin":"filter","table":"","alias":"0","sourceId":"model0000017087812c37_00000002","conditions":{},"scope":"model0000017087ae7430_00000000","hierarchyNames":["Date"],"hierarchyUniqueNames":["CAMERA.DATE_1"],"isNamedSet":false}],"dataSources":{"version":"1.0","sources":[{"id":"model0000017087812c37_00000002","assetId":"assetId0000017087812c37_00000000","clientId":"myUniqueId7890","module":{"xsd":"https://ibm.com/daas/module/1.0/module.xsd","source":{"id":"connectedfarmsDB2","jdbc":{"jdbcUrl":"jdbc:db2://dashdb-txnha-flex-yp-dal09-21.services.dal.bluemix.net:50000/BLUDB","driverClassName":"com.ibm.db2.jcc.DB2Driver","connectionProperties":"OPTIONAL=TRUE;LOGINTIMEOUT=0"},"user":"bluadmin","password":"YzY2ZDkyNDRjODQ3"},"table":{"name":"CAMERA","description":"description of the table for visual hints ","column":[{"name":"DEVICE_ID","description":"String","datatype":"NVARCHAR(60)","nullable":false,"label":"Device Id","usage":"identifier","regularAggregate":"countDistinct"},{"name":"DEVICE_STATUS","description":"String","datatype":"NVARCHAR(60)","nullable":false,"label":"Device Status","usage":"attribute","regularAggregate":"countDistinct"},{"name":"WATER_STRESS_LEVEL","description":"String","datatype":"BIGINT","nullable":false,"label":"Water Stress Level","usage":"attribute","regularAggregate":"total"},{"name":"CANOPY_TEMPERATURE","description":"String","datatype":"DOUBLE","nullable":false,"label":"Canopy Temperature","usage":"attribute","regularAggregate":"total"},{"name":"AIR_TEMPERATURE","description":"String","datatype":"DOUBLE","nullable":false,"label":"Air Temperature","usage":"attribute","regularAggregate":"total"},{"name":"WITTYPI_TEMPERATURE","description":"String","datatype":"DOUBLE","nullable":false,"label":"Witty Pi Temperature","usage":"attribute","regularAggregate":"total"},{"name":"CPU_TEMPERATURE","description":"String","datatype":"DOUBLE","nullable":false,"label":"CPU Temperature","usage":"attribute","regularAggregate":"total"},{"name":"LUXOMETER","description":"String","datatype":"DOUBLE","nullable":false,"label":"Luxometer","usage":"attribute","regularAggregate":"total"},{"name":"DATE_AND_TIME","description":"String","datatype":"String","nullable":false,"label":"Timestamp","usage":"attribute","regularAggregate":"total"},{"name":"LATITUDE","description":"String","datatype":"DOUBLE","nullable":false,"label":"Latitude","usage":"attribute","regularAggregate":"total"},{"name":"LONGITUDE","description":"String","datatype":"DOUBLE","nullable":false,"label":"Longitude","usage":"attribute","regularAggregate":"total"},{"name":"DATE_1","description":"String","datatype":"DATE","nullable":false,"label":"Date","usage":"attribute","regularAggregate":"total"},{"name":"TIME_1","description":"String","datatype":"NVARCHAR(60)","nullable":false,"label":"Time","usage":"attribute","regularAggregate":"count"}]},"label":"Module Name","identifier":"moduleId"},"name":"Connected Farms DB2","shaping":{"shapingId":"shaping000001719d6fa1d3_00000000","embeddedModuleUpToDate":false,"moserJSON":{"version":"5.0.1","container":"C","useSpec":[{"identifier":"ES","type":"url","storeID":"baseModule","imports":"*"}],"expressionLocale":"en-us","querySubject":[{"ref":["ES.CAMERA"],"instanceType":"reference","item":[{"queryItem":{"regularAggregate":"count","identifier":"WATER_STRESS_LEVEL","property":[{"name":"propertySetByUser_regularAggregate","value":"true"}]}}],"identifier":"CAMERA"}],"calculation":[{"expression":"CAMERA.WATER_STRESS_LEVEL + 0","usage":"fact","format":"","datatype":"DECIMAL(20,0)","nullable":true,"regularAggregate":"calculated","datatypeCategory":"number","highlevelDatatype":"decimal","facetDefinition":{"enabled":"automatic"},"identifier":"Water_Stress_Level_0","label":"Water Stress Level + 0","property":[{"name":"ui_expr","value":"{\"func\":\"simpleCalculation\",\"version\":\"5.0.1\",\"inputtedName\":\"\",\"operation\":\"+\",\"swap\":false,\"elementOperands\":[\"CAMERA.WATER_STRESS_LEVEL\",\"\"],\"numberOperands\":[\"\",\"0\"]}"}],"propertyOverride":["NEW"]},{"expression":"CAMERA.WATER_STRESS_LEVEL + 0","usage":"fact","format":"","datatype":"DECIMAL(20,0)","nullable":true,"regularAggregate":"calculated","datatypeCategory":"number","highlevelDatatype":"decimal","facetDefinition":{"enabled":"automatic"},"identifier":"Water_Stress_Level_0_1","label":"Water Stress Level","property":[{"name":"ui_expr","value":"{\"func\":\"customCalculation\",\"version\":\"5.0.1\"}"}],"propertyOverride":["NEW"]},{"expression":"CAMERA.CANOPY_TEMPERATURE + 0","usage":"fact","format":"","datatype":"DOUBLE","nullable":true,"regularAggregate":"calculated","datatypeCategory":"number","highlevelDatatype":"decimal","facetDefinition":{"enabled":"automatic"},"identifier":"Canopy_Temperature","label":"Canopy Temperature","property":[{"name":"ui_expr","value":"{\"func\":\"simpleCalculation\",\"version\":\"5.0.1\",\"inputtedName\":\"Canopy Temperature\",\"operation\":\"+\",\"swap\":false,\"elementOperands\":[\"CAMERA.CANOPY_TEMPERATURE\",\"\"],\"numberOperands\":[\"\",\"0\"]}"}],"propertyOverride":["NEW"]},{"expression":"CAMERA.CANOPY_TEMPERATURE + 0","usage":"fact","format":"","datatype":"DOUBLE","nullable":true,"regularAggregate":"calculated","datatypeCategory":"number","highlevelDatatype":"decimal","facetDefinition":{"enabled":"automatic"},"identifier":"Canopy_Temperature_1","label":"Canopy Temperature","property":[{"name":"ui_expr","value":"{\"func\":\"simpleCalculation\",\"version\":\"5.0.1\",\"inputtedName\":\"Canopy Temperature\",\"operation\":\"+\",\"swap\":false,\"elementOperands\":[\"CAMERA.CANOPY_TEMPERATURE\",\"\"],\"numberOperands\":[\"\",\"0\"]}"}],"propertyOverride":["NEW"]},{"expression":"CAMERA.CANOPY_TEMPERATURE + 0","usage":"fact","format":"","datatype":"DOUBLE","nullable":true,"regularAggregate":"calculated","datatypeCategory":"number","highlevelDatatype":"decimal","facetDefinition":{"enabled":"automatic"},"identifier":"Canopy_Temperature_2","label":"Canopy Temperature","property":[{"name":"ui_expr","value":"{\"func\":\"simpleCalculation\",\"version\":\"5.0.1\",\"inputtedName\":\"Canopy Temperature\",\"operation\":\"+\",\"swap\":false,\"elementOperands\":[\"CAMERA.CANOPY_TEMPERATURE\",\"\"],\"numberOperands\":[\"\",\"0\"]}"}],"propertyOverride":["NEW"]},{"expression":"CAMERA.AIR_TEMPERATURE + 0","usage":"fact","format":"","datatype":"DOUBLE","nullable":true,"regularAggregate":"calculated","datatypeCategory":"number","highlevelDatatype":"decimal","facetDefinition":{"enabled":"automatic"},"identifier":"Air_Temperature_0","label":"Air Temperature","property":[{"name":"ui_expr","value":"{\"func\":\"simpleCalculation\",\"version\":\"5.0.1\",\"inputtedName\":\"Air Temperature\",\"operation\":\"+\",\"swap\":false,\"elementOperands\":[\"CAMERA.AIR_TEMPERATURE\",\"\"],\"numberOperands\":[\"\",\"0\"]}"}],"propertyOverride":["NEW"]},{"expression":"CAMERA.LUXOMETER + 0","usage":"fact","format":"","datatype":"DOUBLE","nullable":true,"regularAggregate":"calculated","datatypeCategory":"number","highlevelDatatype":"decimal","facetDefinition":{"enabled":"automatic"},"identifier":"Luxometer","label":"Luxometer","property":[{"name":"ui_expr","value":"{\"func\":\"simpleCalculation\",\"version\":\"5.0.1\",\"inputtedName\":\"Luxometer\",\"operation\":\"+\",\"swap\":false,\"elementOperands\":[\"CAMERA.LUXOMETER\",\"\"],\"numberOperands\":[\"\",\"0\"]}"}],"propertyOverride":["NEW"]},{"expression":"CAMERA.CPU_TEMPERATURE + 0","usage":"fact","format":"","datatype":"DOUBLE","nullable":true,"regularAggregate":"calculated","datatypeCategory":"number","highlevelDatatype":"decimal","facetDefinition":{"enabled":"automatic"},"identifier":"CPU_Temperature","label":"CPU Temperature","property":[{"name":"ui_expr","value":"{\"func\":\"simpleCalculation\",\"version\":\"5.0.1\",\"inputtedName\":\"CPU Temperature\",\"operation\":\"+\",\"swap\":false,\"elementOperands\":[\"CAMERA.CPU_TEMPERATURE\",\"\"],\"numberOperands\":[\"\",\"0\"]}"}],"propertyOverride":["NEW"]}],"metadataTreeView":[{"folderItem":[{"ref":"Water_Stress_Level_0"},{"ref":"Water_Stress_Level_0_1"},{"ref":"Canopy_Temperature"},{"ref":"Canopy_Temperature_1"},{"ref":"Canopy_Temperature_2"},{"ref":"Air_Temperature_0"},{"ref":"Luxometer"},{"ref":"CPU_Temperature"}]}],"dataRetrievalMode":"liveConnection","identifier":"newModel","label":"newModel"}}}]},"drillThrough":[],"widgets":{"model0000017087c672b4_00000000":{"id":"model0000017087c672b4_00000000","type":"text","content":{"translationTable":{"Default":"<div class=\"staticContent textFillNoScroll\" dir=\"auto\"><div class=\"summernote\" style=\"display: none;\"></div><div class=\"note-editor\"><div class=\"note-dropzone\">  <div class=\"note-dropzone-message\"></div></div><div class=\"note-editing-area\"><div class=\"note-handle\"><div class=\"note-control-selection\"><div class=\"note-control-selection-bg\"></div><div class=\"note-control-holder note-control-nw\"></div><div class=\"note-control-holder note-control-ne\"></div><div class=\"note-control-holder note-control-sw\"></div><div class=\"note-control-sizing note-control-se\"></div><div class=\"note-control-selection-info\"></div></div></div><div class=\"note-editable\" contenteditable=\"false\"><p class=\"responsiveColor responsiveFontSize responsiveFontFamily\" style=\"font-size: 17px;\">Water Stress Level:</p></div></div></div></div>"}},"isResponsive":true,"visTypeLocked":true,"name":""},"model0000017087c672b8_00000002":{"id":"model0000017087c672b8_00000002","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model0000017087b0fa89_00000000","itemId":"CAMERA.CANOPY_TEMPERATURE","itemLabel":"Canopy Temperature"}],"id":"model0000017087b0fa89_00000001"}]},"slotmapping":{"slots":[{"name":"level1","dataItems":["model0000017087b0fa89_00000000"],"caption":"Level one","id":"level1","layerId":"data"}]},"type":"live","name":{"translationTable":{}},"visId":"list"},"model0000017087c672b8_00000003":{"id":"model0000017087c672b8_00000003","type":"text","content":{"translationTable":{"Default":"<div class=\"staticContent textFillNoScroll\" dir=\"auto\"><div class=\"summernote\" style=\"display: none;\"></div><div class=\"note-editor\"><div class=\"note-dropzone\">  <div class=\"note-dropzone-message\"></div></div><div class=\"note-editing-area\"><div class=\"note-handle\"><div class=\"note-control-selection\"><div class=\"note-control-selection-bg\"></div><div class=\"note-control-holder note-control-nw\"></div><div class=\"note-control-holder note-control-ne\"></div><div class=\"note-control-holder note-control-sw\"></div><div class=\"note-control-sizing note-control-se\"></div><div class=\"note-control-selection-info\"></div></div></div><div class=\"note-editable\" contenteditable=\"false\"><p class=\"responsiveColor responsiveFontSize responsiveFontFamily\" style=\"font-size: 18px;\"><span>Canopy Temperature:</span></p></div></div></div></div>"}},"isResponsive":true,"visTypeLocked":true,"name":""},"model0000017087c672b8_00000006":{"id":"model0000017087c672b8_00000006","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model0000017087b2dd2c_00000000","itemId":"CAMERA.AIR_TEMPERATURE","itemLabel":"Air Temperature"}],"id":"model0000017087b2dd2c_00000001"}]},"slotmapping":{"slots":[{"name":"level1","dataItems":["model0000017087b2dd2c_00000000"],"caption":"Level one","id":"level1","layerId":"data"}]},"type":"live","name":{"translationTable":{}},"visId":"list"},"model0000017087c672b8_00000007":{"id":"model0000017087c672b8_00000007","type":"text","content":{"translationTable":{"Default":"<div class=\"staticContent textFillNoScroll\" dir=\"auto\"><div class=\"summernote\" style=\"display: none;\"></div><div class=\"note-editor\"><div class=\"note-dropzone\">  <div class=\"note-dropzone-message\"></div></div><div class=\"note-editing-area\"><div class=\"note-handle\"><div class=\"note-control-selection\"><div class=\"note-control-selection-bg\"></div><div class=\"note-control-holder note-control-nw\"></div><div class=\"note-control-holder note-control-ne\"></div><div class=\"note-control-holder note-control-sw\"></div><div class=\"note-control-sizing note-control-se\"></div><div class=\"note-control-selection-info\"></div></div></div><div class=\"note-editable\" contenteditable=\"false\"><p class=\"responsiveColor responsiveFontSize responsiveFontFamily\" style=\"font-size: 18px;\"><span>Air Temperature:</span></p></div></div></div></div>"}},"isResponsive":true,"visTypeLocked":true,"name":""},"model0000017087c672b8_00000008":{"id":"model0000017087c672b8_00000008","type":"shape","name":"Line","content":"<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\"  class=\"staticContent\" height=\"100%\" width=\"100%\" preserveAspectRatio=\"none\"  viewBox=\"0 0 100 100\"><g xmlns=\"http://www.w3.org/2000/svg\" vector-effect=\"non-scaling-stroke\"><path stroke=\"currentColor\" stroke-width=\"3\" vector-effect=\"non-scaling-stroke\" d=\"M0 50L100 50\"/><path style=\"fill:none!important;stroke:none!important;pointer-events:all!important\" vector-effect=\"non-scaling-stroke\" d=\"M0 30H100V70H0z\"/></g></svg>","borderColor":"color8","fillColor":"transparent","visTypeLocked":true},"model0000017087c672b9_00000000":{"id":"model0000017087c672b9_00000000","type":"shape","name":"Line","content":"<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\"  class=\"staticContent\" height=\"100%\" width=\"100%\" preserveAspectRatio=\"none\"  viewBox=\"0 0 100 100\"><g xmlns=\"http://www.w3.org/2000/svg\" vector-effect=\"non-scaling-stroke\"><path stroke=\"currentColor\" stroke-width=\"3\" vector-effect=\"non-scaling-stroke\" d=\"M0 50L100 50\"/><path style=\"fill:none!important;stroke:none!important;pointer-events:all!important\" vector-effect=\"non-scaling-stroke\" d=\"M0 30H100V70H0z\"/></g></svg>","borderColor":"color8","fillColor":"transparent","visTypeLocked":true},"model0000017087c672b9_00000003":{"id":"model0000017087c672b9_00000003","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model0000017087aa1a88_00000000","itemId":"CAMERA.WATER_STRESS_LEVEL","itemLabel":"Water Stress Level"}],"id":"model0000017087aa1a88_00000001"}]},"slotmapping":{"slots":[{"name":"level1","dataItems":["model0000017087aa1a88_00000000"],"caption":"Level one","id":"level1","layerId":"data"}]},"type":"live","name":{"translationTable":{}},"visId":"list"},"model0000017087c672ba_00000000":{"id":"model0000017087c672ba_00000000","type":"shape","name":"Line","content":"<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\"  class=\"staticContent\" height=\"100%\" width=\"100%\" preserveAspectRatio=\"none\"  viewBox=\"0 0 100 100\"><g xmlns=\"http://www.w3.org/2000/svg\" vector-effect=\"non-scaling-stroke\"><path stroke=\"currentColor\" stroke-width=\"3\" vector-effect=\"non-scaling-stroke\" d=\"M0 50L100 50\"/><path style=\"fill:none!important;stroke:none!important;pointer-events:all!important\" vector-effect=\"non-scaling-stroke\" d=\"M0 30H100V70H0z\"/></g></svg>","borderColor":"color8","fillColor":"transparent","visTypeLocked":true},"model0000017087c672ba_00000001":{"id":"model0000017087c672ba_00000001","type":"text","content":{"translationTable":{"Default":"<div class=\"staticContent textFillNoScroll\" dir=\"auto\"><div class=\"summernote\" style=\"display: none;\"></div><div class=\"note-editor\"><div class=\"note-dropzone\">  <div class=\"note-dropzone-message\"></div></div><div class=\"note-editing-area\"><div class=\"note-handle\"><div class=\"note-control-selection\"><div class=\"note-control-selection-bg\"></div><div class=\"note-control-holder note-control-nw\"></div><div class=\"note-control-holder note-control-ne\"></div><div class=\"note-control-holder note-control-sw\"></div><div class=\"note-control-sizing note-control-se\"></div><div class=\"note-control-selection-info\"></div></div></div><div class=\"note-editable\" contenteditable=\"false\"><p class=\"responsiveColor responsiveFontSize responsiveFontFamily\" style=\"font-size: 16px;\"><span>WittyPi Temperature:</span></p></div></div></div></div>"}},"isResponsive":true,"visTypeLocked":true,"name":""},"model0000017087c672ba_00000002":{"id":"model0000017087c672ba_00000002","type":"shape","name":"Line","content":"<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\"  class=\"staticContent\" height=\"100%\" width=\"100%\" preserveAspectRatio=\"none\"  viewBox=\"0 0 100 100\"><g xmlns=\"http://www.w3.org/2000/svg\" vector-effect=\"non-scaling-stroke\"><path stroke=\"currentColor\" stroke-width=\"3\" vector-effect=\"non-scaling-stroke\" d=\"M0 50L100 50\"/><path style=\"fill:none!important;stroke:none!important;pointer-events:all!important\" vector-effect=\"non-scaling-stroke\" d=\"M0 30H100V70H0z\"/></g></svg>","borderColor":"color8","fillColor":"transparent","visTypeLocked":true},"model0000017087c672ba_00000005":{"id":"model0000017087c672ba_00000005","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model0000017087c06e6d_00000000","itemId":"CAMERA.WITTYPI_TEMPERATURE","itemLabel":"Witty Pi Temperature"}],"id":"model0000017087c06e6e_00000000"}]},"slotmapping":{"slots":[{"name":"level1","dataItems":["model0000017087c06e6d_00000000"],"caption":"Level one","id":"level1","layerId":"data"}]},"type":"live","name":{"translationTable":{}},"visId":"list"},"model0000017087c672ba_00000008":{"id":"model0000017087c672ba_00000008","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model0000017087c29d0c_00000000","itemId":"CAMERA.CPU_TEMPERATURE","itemLabel":"CPU Temperature"}],"id":"model0000017087c29d0c_00000001"}]},"slotmapping":{"slots":[{"name":"level1","dataItems":["model0000017087c29d0c_00000000"],"caption":"Level one","id":"level1","layerId":"data"}]},"type":"live","name":{"translationTable":{}},"visId":"list"},"model0000017087c672ba_00000009":{"id":"model0000017087c672ba_00000009","type":"text","content":{"translationTable":{"Default":"<div class=\"staticContent textFillNoScroll\" dir=\"auto\"><div class=\"summernote\" style=\"display: none;\"></div><div class=\"note-editor\"><div class=\"note-dropzone\">  <div class=\"note-dropzone-message\"></div></div><div class=\"note-editing-area\"><div class=\"note-handle\"><div class=\"note-control-selection\"><div class=\"note-control-selection-bg\"></div><div class=\"note-control-holder note-control-nw\"></div><div class=\"note-control-holder note-control-ne\"></div><div class=\"note-control-holder note-control-sw\"></div><div class=\"note-control-sizing note-control-se\"></div><div class=\"note-control-selection-info\"></div></div></div><div class=\"note-editable\" contenteditable=\"false\"><p class=\"responsiveColor responsiveFontSize responsiveFontFamily\" style=\"font-size: 17px;\"><span>CPU Temperature:</span></p></div></div></div></div>"}},"isResponsive":true,"visTypeLocked":true,"name":""},"model0000017087c672ba_0000000a":{"id":"model0000017087c672ba_0000000a","type":"shape","name":"Line","content":"<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\"  class=\"staticContent\" height=\"100%\" width=\"100%\" preserveAspectRatio=\"none\"  viewBox=\"0 0 100 100\"><g xmlns=\"http://www.w3.org/2000/svg\" vector-effect=\"non-scaling-stroke\"><path stroke=\"currentColor\" stroke-width=\"3\" vector-effect=\"non-scaling-stroke\" d=\"M0 50L100 50\"/><path style=\"fill:none!important;stroke:none!important;pointer-events:all!important\" vector-effect=\"non-scaling-stroke\" d=\"M0 30H100V70H0z\"/></g></svg>","borderColor":"color8","fillColor":"transparent","visTypeLocked":true},"model0000017087c672bb_00000002":{"id":"model0000017087c672bb_00000002","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model0000017087c42b03_00000000","itemId":"CAMERA.LUXOMETER","itemLabel":"Luxometer"}],"id":"model0000017087c42b03_00000001"}]},"slotmapping":{"slots":[{"name":"level1","dataItems":["model0000017087c42b03_00000000"],"caption":"Level one","id":"level1","layerId":"data"}]},"type":"live","name":{"translationTable":{}},"visId":"list"},"model0000017087c672bb_00000003":{"id":"model0000017087c672bb_00000003","type":"text","content":{"translationTable":{"Default":"<div class=\"staticContent textFillNoScroll\" dir=\"auto\"><div class=\"summernote\" style=\"display: none;\"></div><div class=\"note-editor\"><div class=\"note-dropzone\">  <div class=\"note-dropzone-message\"></div></div><div class=\"note-editing-area\"><div class=\"note-handle\"><div class=\"note-control-selection\"><div class=\"note-control-selection-bg\"></div><div class=\"note-control-holder note-control-nw\"></div><div class=\"note-control-holder note-control-ne\"></div><div class=\"note-control-holder note-control-sw\"></div><div class=\"note-control-sizing note-control-se\"></div><div class=\"note-control-selection-info\"></div></div></div><div class=\"note-editable\" contenteditable=\"false\"><p class=\"responsiveColor responsiveFontSize responsiveFontFamily\" style=\"font-size: 19px;\"><span>Luxometer:</span></p></div></div></div></div>"}},"isResponsive":true,"visTypeLocked":true,"name":""},"model0000017087c672bb_00000006":{"id":"model0000017087c672bb_00000006","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model0000017087af75c8_00000001","itemId":"CAMERA.LATITUDE","itemLabel":"Latitude"},{"id":"model0000017087af7b4b_00000001","itemId":"CAMERA.LONGITUDE","itemLabel":"Longitude"}],"id":"model0000017087af75c8_00000000"}]},"visTypeLocked":true,"slotmapping":{"slots":[{"name":"latlongLocations.latitude","dataItems":["model0000017087af75c8_00000001"],"caption":"Latitude","id":"latlongLocations.latitude","layerId":"data.latlong"},{"name":"latlongLocations.longitude","dataItems":["model0000017087af7b4b_00000001"],"caption":"Longitude","id":"latlongLocations.longitude","layerId":"data.latlong"}],"layers":[{"type":"data.latlong","id":"data.latlong","dataViewId":"model0000017087af75c8_00000000"}]},"type":"live","visId":"com.ibm.vis.rave2bundletiledmap","name":{"translationTable":{}}},"model0000017087c866f7_00000000":{"id":"model0000017087c866f7_00000000","properties":{"itemName":"Device Id","itemId":"CAMERA.DEVICE_ID","dataType":"string","usage":"attribute","isHierarchy":false,"sourceId":"model0000017087812c37_00000002","scope":"model0000017087ae6de8_00000000"},"type":"filter","name":""},"model0000017087c9c59a_00000000":{"id":"model0000017087c9c59a_00000000","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model0000017087c9db88_00000000","itemId":"CAMERA.TIME_1","itemLabel":"Time"},{"id":"model0000017087cd33a0_00000004","itemId":"Water_Stress_Level_0_1","itemLabel":"Water Stress Level + 0","aggregate":"avg","format":{"id":"none","localizedString":"Auto"}}],"id":"model0000017087c9db87_00000000"},{"modelRef":"model0000017087c9db87_00000000","dataItems":[],"id":"model0000017087cd39c9_00000002"}]},"visTypeLocked":true,"slotmapping":{"slots":[{"name":"categories","dataItems":["model0000017087c9db88_00000000"],"dataItemSettings":[],"caption":"x-axis","id":"categories","layerId":"data"},{"name":"values","dataItems":["model0000017087cd33a0_00000004"],"caption":"y-axis","id":"values","layerId":"data"}]},"type":"live","visId":"com.ibm.vis.rave2line","name":{"translationTable":{}},"localFilters":[]},"model0000017087d4c4e4_00000000":{"id":"model0000017087d4c4e4_00000000","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model0000017087d4d79f_00000000","itemId":"CAMERA.TIME_1","itemLabel":"Time"},{"id":"model000001719d66f855_00000000","itemId":"Air_Temperature_0","itemLabel":"Air Temperature","aggregate":"avg"}],"id":"model0000017087d4d79e_00000000"}]},"visTypeLocked":true,"slotmapping":{"slots":[{"name":"categories","dataItems":["model0000017087d4d79f_00000000"],"dataItemSettings":[],"caption":"x-axis","id":"categories","layerId":"data"},{"name":"values","dataItems":["model000001719d66f855_00000000"],"caption":"y-axis","id":"values"}]},"type":"live","visId":"com.ibm.vis.rave2line","name":{"translationTable":{}},"localFilters":[]},"model0000017087d5b506_00000000":{"id":"model0000017087d5b506_00000000","type":"text","content":{"translationTable":{"Default":"<div class=\"staticContent textFillNoScroll\" dir=\"auto\"><div class=\"summernote\" style=\"display: none;\"></div><div class=\"note-editor\"><div class=\"note-dropzone\">  <div class=\"note-dropzone-message\"></div></div><div class=\"note-editing-area\"><div class=\"note-handle\"><div class=\"note-control-selection\"><div class=\"note-control-selection-bg\"></div><div class=\"note-control-holder note-control-nw\"></div><div class=\"note-control-holder note-control-ne\"></div><div class=\"note-control-holder note-control-sw\"></div><div class=\"note-control-sizing note-control-se\"></div><div class=\"note-control-selection-info\"></div></div></div><div class=\"note-editable\" contenteditable=\"false\"><p class=\"responsiveColor responsiveFontSize responsiveFontFamily\" style=\"font-size: 23px;\"><span>Device Status:</span></p></div></div></div></div>"}},"isResponsive":true,"visTypeLocked":true,"name":""},"model000001708c178e0a_00000003":{"id":"model000001708c178e0a_00000003","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model000001708c178e0a_00000000","itemId":"CAMERA.DEVICE_STATUS","itemLabel":"Device Status"}],"id":"model000001708c178e0a_00000001"}]},"slotmapping":{"slots":[{"name":"level1","dataItems":["model000001708c178e0a_00000000"],"caption":"Level one","id":"level1","layerId":"data"}]},"type":"live","name":{"translationTable":{}},"visId":"list"},"model000001708c1a3915_00000000":{"id":"model000001708c1a3915_00000000","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model000001708c1b852b_00000000","itemId":"CAMERA.DATE_1","itemLabel":"Date"},{"id":"model000001719d639a63_00000001","itemId":"Canopy_Temperature_2","itemLabel":"Canopy Temperature","aggregate":"max"}],"id":"model000001708c1a5f06_00000000"}]},"visTypeLocked":true,"slotmapping":{"slots":[{"name":"categories","dataItems":["model000001708c1b852b_00000000"],"dataItemSettings":[],"caption":"x-axis","id":"categories","layerId":"data"},{"name":"values","dataItems":["model000001719d639a63_00000001"],"caption":"y-axis","id":"values"}]},"type":"live","visId":"com.ibm.vis.rave2line","name":{"translationTable":{}},"localFilters":[]},"model000001708c1caf0b_00000000":{"id":"model000001708c1caf0b_00000000","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model000001708c1cbbab_00000001","itemId":"Water_Stress_Level_0_1","itemLabel":"Water Stress Level","aggregate":"avg"},{"id":"model000001708c1ccab5_00000001","itemId":"CAMERA.DATE_1","itemLabel":"Date"}],"id":"model000001708c1cbbab_00000000"}]},"visTypeLocked":true,"slotmapping":{"slots":[{"name":"values","dataItems":["model000001708c1cbbab_00000001"],"caption":"y-axis","id":"values"},{"name":"categories","dataItems":["model000001708c1ccab5_00000001"],"dataItemSettings":[],"caption":"x-axis","id":"categories"}]},"type":"live","visId":"com.ibm.vis.rave2line","name":{"translationTable":{}},"localFilters":[]},"model000001719d6d24c2_00000000":{"id":"model000001719d6d24c2_00000000","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model000001719d6d66cd_00000000","itemId":"CAMERA.TIME_1","itemLabel":"Time"},{"id":"model000001719d6db947_00000001","itemId":"Luxometer","itemLabel":"Luxometer","aggregate":"avg"}],"id":"model000001719d6d51e2_00000000"}]},"visTypeLocked":true,"slotmapping":{"slots":[{"name":"categories","dataItems":["model000001719d6d66cd_00000000"],"dataItemSettings":[],"caption":"x-axis","id":"categories"},{"name":"values","dataItems":["model000001719d6db947_00000001"],"caption":"y-axis","id":"values"}]},"type":"live","visId":"com.ibm.vis.rave2line","name":{"translationTable":{}},"localFilters":[]},"model000001719d6e7fe5_00000000":{"id":"model000001719d6e7fe5_00000000","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model000001719d6e9ace_00000001","itemId":"Canopy_Temperature","itemLabel":"Canopy Temperature","aggregate":"avg"},{"id":"model000001719d6ec0da_00000000","itemId":"CAMERA.TIME_1","itemLabel":"Time"}],"id":"model000001719d6e9ace_00000000"}]},"visTypeLocked":true,"slotmapping":{"slots":[{"name":"values","dataItems":["model000001719d6e9ace_00000001"],"caption":"y-axis","id":"values"},{"name":"categories","dataItems":["model000001719d6ec0da_00000000"],"dataItemSettings":[],"caption":"x-axis","id":"categories"}]},"type":"live","visId":"com.ibm.vis.rave2line","name":{"translationTable":{}},"localFilters":[]},"model000001719d6f6047_00000000":{"id":"model000001719d6f6047_00000000","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model000001719d6fb9df_00000001","itemId":"CAMERA.TIME_1","itemLabel":"Time"},{"id":"model000001719d6fde6a_00000000","itemId":"CPU_Temperature","itemLabel":"CPU Temperature","aggregate":"avg"}],"id":"model000001719d6fb03f_00000000"}]},"visTypeLocked":true,"slotmapping":{"slots":[{"name":"categories","dataItems":["model000001719d6fb9df_00000001"],"dataItemSettings":[],"caption":"x-axis","id":"categories"},{"name":"values","dataItems":["model000001719d6fde6a_00000000"],"caption":"y-axis","id":"values"}]},"type":"live","visId":"com.ibm.vis.rave2line","name":{"translationTable":{}},"localFilters":[]},"model000001719d7046d7_00000000":{"id":"model000001719d7046d7_00000000","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model000001719d707d9e_00000000","itemId":"CAMERA.DATE_1","itemLabel":"Date"},{"id":"model000001719d711a38_00000000","itemId":"Air_Temperature_0","itemLabel":"Air Temperature","aggregate":"avg"}],"id":"model000001719d70615e_00000000"}]},"visTypeLocked":true,"slotmapping":{"slots":[{"name":"categories","dataItems":["model000001719d707d9e_00000000"],"dataItemSettings":[],"caption":"x-axis","id":"categories"},{"name":"values","dataItems":["model000001719d711a38_00000000"],"caption":"y-axis","id":"values"}]},"type":"live","visId":"com.ibm.vis.rave2line","name":{"translationTable":{}},"localFilters":[]},"model000001719d719e72_00000000":{"id":"model000001719d719e72_00000000","data":{"dataViews":[{"modelRef":"model0000017087812c37_00000002","dataItems":[{"id":"model000001719d71b4ae_00000001","itemId":"Luxometer","itemLabel":"Luxometer","aggregate":"avg"},{"id":"model000001719d71c4a5_00000000","itemId":"CAMERA.DATE_1","itemLabel":"Date"}],"id":"model000001719d71b4ae_00000000"}]},"visTypeLocked":true,"slotmapping":{"slots":[{"name":"values","dataItems":["model000001719d71b4ae_00000001"],"caption":"y-axis","id":"values"},{"name":"categories","dataItems":["model000001719d71c4a5_00000000"],"dataItemSettings":[],"caption":"x-axis","id":"categories"}]},"type":"live","visId":"com.ibm.vis.rave2line","name":{"translationTable":{}},"localFilters":[]}}};
    		}
   			initializeCognosApi(sessionCode, spec);
	    } else {
	    	console.log('Error while getting cognos session', data);
	    }
	})
	.catch((error) => {
		console.log(error);// This is where you run code if the server returns any errors
	});


/*
var request = new XMLHttpRequest();
console.log('before');
request.open('POST', "https://us-south.functions.cloud.ibm.com/api/v1/web/ORG_NCSU_CF_dev/ConnectedFarms/get-cognos-session-with-authentication", true);
request.setRequestHeader("Content-Type", "application/json;charset=UTF-8");

request.onload = function() {
    var data = JSON.parse(this.response);
    const sessionCode = data['sessionCode'];
    const success = data['success'];
    const message = data['message'];
    console.log(sessionCode);
    if (success){
    	
	}else{
		console.log("Cognos Request Failed"+message);
	}
};
request.send(payload);
*/
console.log('after');
function initializeCognosApi(sessionCode, spec) {
    //create api
    window.api = new CognosApi({
        cognosRootURL: 'https://us-south.dynamic-dashboard-embedded.cloud.ibm.com/daas/',
        node: document.getElementById("ddeDashboard"),
        sessionCode: sessionCode
    });
   
    //function log errors
    window.onError = function(event) {
        console.log('onError:' + JSON.stringify(event));
    };
    window.api.on(CognosApi.EVENTS.REQUEST_ERROR, window.onError);
   
    //create new dashboard
    window.api.initialize().then(() => {
        // create a new dashboard through the dashboard factory
        window.api.dashboard.openDashboard({
		dashboardSpec: spec
        }).then((dashboardAPI) => {
            console.log('Dashboard opened successfully.');
            console.log(dashboardAPI);
            dashboardAPI.addSources([{
  module: {
    "xsd": "https://ibm.com/daas/module/1.0/module.xsd",
    "source": {
        "id": "connectedfarmsDB2",
        "jdbc": {
            "jdbcUrl": "jdbc:db2://dashdb-txnha-flex-yp-dal09-21.services.dal.bluemix.net:50000/BLUDB",
            "driverClassName": "com.ibm.db2.jcc.DB2Driver",
            "connectionProperties": "OPTIONAL=TRUE;LOGINTIMEOUT=0"
           
        },
        "user": "bluadmin",
        "password": "YzY2ZDkyNDRjODQ3"
    },
    "table": {
        "name": "CAMERA",
        "description": "description of the table for visual hints ",
        "column": [
            {
                "name": "DEVICE_ID",
                "description": "String",
                "datatype": "NVARCHAR(60)",
                "nullable": false,
                "label": "Device Id",
                "usage": "identifier",
                "regularAggregate": "countDistinct"
            },
            {
                "name": "DEVICE_STATUS",
                "description": "String",
                "datatype": "NVARCHAR(60)",
                "nullable": false,
                "label": "Device Status",
                "usage": "attribute",
                "regularAggregate": "countDistinct"
            },
            {
                "name": "WATER_STRESS_LEVEL",
                "description": "String",
                "datatype": "BIGINT",
                "nullable": false,
                "label": "Water Stress Level",
                "usage": "attribute",
                "regularAggregate": "total"
            },
            {
                "name": "CANOPY_TEMPERATURE",
                "description": "String",
                "datatype": "DOUBLE",
                "nullable": false,
                "label": "Canopy Temperature",
                "usage": "attribute",
                "regularAggregate": "total"
            },
            {
                "name": "AIR_TEMPERATURE",
                "description": "String",
                "datatype": "DOUBLE",
                "nullable": false,
                "label": "Air Temperature",
                "usage": "attribute",
                "regularAggregate": "total"
            },
            {
                "name": "WITTYPI_TEMPERATURE",
                "description": "String",
                "datatype": "DOUBLE",
                "nullable": false,
                "label": "Witty Pi Temperature",
                "usage": "attribute",
                "regularAggregate": "total"
            },
            {
                "name": "CPU_TEMPERATURE",
                "description": "String",
                "datatype": "DOUBLE",
                "nullable": false,
                "label": "CPU Temperature",
                "usage": "attribute",
                "regularAggregate": "total"
            },
            {
                "name": "LUXOMETER",
                "description": "String",
                "datatype": "DOUBLE",
                "nullable": false,
                "label": "Luxometer",
                "usage": "attribute",
                "regularAggregate": "total"
            },
            {
                "name": "DATE_AND_TIME",
                "description": "String",
                "datatype": "String",
                "nullable": false,
                "label": "Timestamp",
                "usage": "attribute",
                "regularAggregate": "total"
                
            }
    ,
            {
                "name": "LATITUDE",
                "description": "String",
                "datatype": "DOUBLE",
                "nullable": false,
                "label": "Latitude",
                "usage": "attribute",
                "regularAggregate": "total"
            },
            {
                "name": "LONGITUDE",
                "description": "String",
                "datatype": "DOUBLE",
                "nullable": false,
                "label": "Longitude",
                "usage": "attribute",
                "regularAggregate": "total"
            },
            
            
            {
                "name": "DATE_1",
                "description": "String",
                "datatype": "DATE",
                "nullable": false,
                "label": "Date",
                "usage": "attribute",
                "regularAggregate": "total"
                
            },
             {
                "name": "TIME_1",
                "description": "String",
                "datatype": "NVARCHAR(60)",
                "nullable": false,
                "label": "Time",
                "usage": "attribute",
                "regularAggregate": "count"
                
            }
            
            
            
        ]
    },
    "label": "Module Name",
    "identifier": "moduleId"
}
,
  name: 'Connected Farms DB2',
  id: 'myUniqueId7890'
}]).then(()=>{
	console.log('added source');
   	window.dashboardApi = dashboardAPI;
    console.log(window.dashboardAPI);
	console.log(window.dashboardApi);
	window.dashboardApi.setMode(window.dashboardApi.MODES.EDIT);
});

        }).catch((err) => {
            console.log(err);
            console.log(window.dashboardApi);
        });
    });
   
}

 
